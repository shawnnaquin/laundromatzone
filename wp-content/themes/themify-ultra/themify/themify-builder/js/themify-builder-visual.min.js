var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,b,p){f!=Array.prototype&&f!=Object.prototype&&(f[b]=p.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var b=0;return $jscomp.iteratorPrototype(function(){return b<f.length?{done:!1,value:f[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.iteratorFromArray=function(f,b){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var p=0,m={next:function(){if(p<f.length){var q=p++;return{value:b(q,f[q]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill=function(f,b,p,m){if(b){p=$jscomp.global;f=f.split(".");for(m=0;m<f.length-1;m++){var q=f[m];q in p||(p[q]={});p=p[q]}f=f[f.length-1];m=p[f];b=b(m);b!=m&&null!=b&&$jscomp.defineProperty(p,f,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6-impl","es3");
$jscomp.findInternal=function(f,b,p){f instanceof String&&(f=String(f));for(var m=f.length,q=0;q<m;q++){var c=f[q];if(b.call(p,c,q,f))return{i:q,v:c}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(b,f){return $jscomp.findInternal(this,b,f).v}},"es6-impl","es3");
(function(f){var b=themifybuilderapp,p=[],m=[];b.mode="visual";b.iframe="";b.VisualCache=[];b.id="";b.Mixins.Frontend={render_visual:function(){var c=[],e=[],a=this.el.querySelectorAll("[data-cid]"),a=Array.prototype.slice.call(a);a.unshift(this.el);for(var d=0,k=a.length;d<k;++d){var n=b.Models.Registry.lookup(a[d].getAttribute("data-cid"));if(n){var g=n.get("elType"),h=n.get("module"===g?"mod_settings":"styling"),t=n.cid;c.push({jobID:t,data:n.toJSON()});h&&0<Object.keys(h).length&&e.push({type:"module"===
g?n.get("mod_name"):g,cid:t,data:h})}}b.liveStylingInstance.setNewRules(e);return b.render_element(c)},change_callback:function(){var c=this.$el;c[0].insertAdjacentHTML("afterbegin",'<span class="sp-preloader tb-preview-component"></span>');this.render_visual().done(function(){c.find(".tb-preview-component").remove();b.Utils.setCompactMode(c[0].getElementsByClassName("module_column"));var e="row"===b.eventName?c.data("cid"):b.beforeEvent.data("cid");b.vent.trigger("dom:change",e,b.beforeEvent,c,b.eventName);
b.Mixins.Builder.update(c);"row"===b.eventName&&b.vent.trigger("dom:builder:change")})},createEl:function(b){var c=this.model.get("elType"),a=f(b);"column"!==c&&(a=a.filter(".module_"+c));var d=a.children(".builder_row_cover");b=a.children("."+c+"-slider");var k=a.data(),n=a[0].getAttribute("style");this.$el.addClass(a[0].getAttribute("class"));for(var g in k)this.el.dataset[g]="object"===typeof k[g]?JSON.stringify(k[g]):k[g];n&&this.el.setAttribute("style",n);0<d.length&&(g=this.$el.children(".builder_row_cover"),
0<g.length?g.replaceWith(d):this.$el.prepend(d));0<b.length&&(c=this.$el.children("."+c+"-slider"),0<c.length?c.replaceWith(b):this.$el.prepend(b))},restoreHtml:function(c){var e="module"===b.activeModel.get("elType")?f(".tb_element_cid_"+b.activeModel.cid):b.liveStylingInstance.$liveStyledElmt;if(0<e.length){var a=c[0].querySelectorAll("[data-cid]"),a=Array.prototype.slice.call(a);a.unshift(c[0]);for(var d=0,k=a.length;d<k;++d){var n=b.Models.Registry.lookup(a[d].getAttribute("data-cid"));n&&n.trigger("change:view",
a[d])}e.replaceWith(c);b.Mixins.Builder.update(c)}}};b.previewVisibility=function(){var c="row"===this.model.get("elType")?this.$el:this.$el.find(".module"),e="row"===this.model.get("elType")?this.model.get("styling"):this.model.get("mod_settings");if(b.isPreview){"hide_all"===e.visibility_all?c.addClass("hide-all"):("hide"===e.visibility_desktop&&c.addClass("hide-desktop"),"hide"===e.visibility_tablet&&c.addClass("hide-tablet"),"hide"===e.visibility_mobile&&c.addClass("hide-mobile"));var a=!1;_.isEmpty(e.custom_parallax_scroll_speed)||
(a=!0,c[0].dataset.parallaxElementSpeed=parseInt(e.custom_parallax_scroll_speed));_.isEmpty(e.custom_parallax_scroll_reverse)||(c[0].dataset.parallaxElementReverse=!0);_.isEmpty(e.custom_parallax_scroll_fade)||(c[0].dataset.parallaxFade=!0);_.isEmpty(e.custom_parallax_scroll_zindex)||(c[0].style.zIndex=e.custom_parallax_scroll_zindex);a&&ThemifyBuilderModuleJs.parallaxScrollingInit(c,!0)}else c.removeClass("hide-desktop hide-tablet hide-mobile hide-all"),_.isEmpty(e.custom_parallax_scroll_speed)||
Rellax.destroy(c[0].dataset.rellaxIndex)};_.extend(b.Views.BaseElement.prototype,b.Mixins.Frontend);b.Views.register_row("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);b.vent.on("dom:preview",b.previewVisibility.bind(this))}});b.Views.register_subrow("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);
this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});b.Views.register_column("visual",{initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});b.Views.register_module("visual",{template:wp.template("builder_visual_module_item"),is_ajax_call:!1,_jqueryXhr:!1,templateVisual:function(b){return wp.template("builder-"+
this.model.get("mod_name")+"-content")(b)},attributes:function(){var b=this.model.get("mod_settings"),b="hide_all"===b.visibility_all||"hide"===b.visibility_desktop||"hide"===b.visibility_tablet||"hide"===b.visibility_mobile?" tb_visibility_hidden":"";return{"class":"themify_builder_module_front module-"+this.model.get("mod_name")+" active_module clearfix tb_element_cid_"+this.model.cid+b,"data-cid":this.model.cid}},initialize:function(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,
"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);this.listenTo(this.model,"custom:preview:live",this.previewLive);this.listenTo(this.model,"custom:preview:refresh",this.previewReload);b.vent.on("dom:preview",b.previewVisibility.bind(this))},createEl:function(b){var c=this.$(".module"),a=c[0].getAttribute("class");c.remove();this.el.insertAdjacentHTML("beforeend",b);this.$el.find(".module").first().addClass(a)},shortcodeToHTML:function(c){function e(d){void 0!==
a._shortcodeXhr&&4!==a._shortcodeXhr&&a._shortcodeXhr.abort();a._shortcodeXhr=f.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element_shortcode",shortcode_data:JSON.stringify(d),tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(d){if(d.success){var k=d.data.shortcodes,c=d.data.styles;if(c){d=0;for(var g=c.length;d<g;++d)Themify.LoadCss(c[d].s,c[d].v,null,c[d].m)}d=0;for(g=k.length;d<g;++d)c=Themify.hash(k[d].key),a.$el.find(".tmp"+c).replaceWith(k[d].html),
p[c]=k[d].html,b.Utils.loadContentJs(a.$el,"module")}}})}for(var a=this,d=[],k=!1,n=themifyBuilder.available_shortcodes,g=0,h=n.length;g<h;++g)c=wp.shortcode.replace(n[g],c,function(a){a=wp.shortcode.string(a);var b=Themify.hash(a);void 0===p[b]?(d.push(a),a='<span class="tmp'+b+'">[loading shortcode...]</span>'):a=p[b];k=!0;return a});k&&0<d.length&&e(d);return{content:c,found:k}},previewLive:function(c,e,a,d,k,n){this.is_ajax_call=!1;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();
var g=void 0!==d&&b.activeModel.cid&&k,h=300;g&&(d=this.$el.find(d),0===d.length?g=!1:n.data("control-repeater")&&(d=d.eq(n.closest(".tb_repeatable_field").index())));c.cid=a?a:b.activeModel.cid;if(!g||!0===e){var f=this.templateVisual(c);if(this.is_ajax_call)return;!0===e&&(e=this.shortcodeToHTML(f),e.found&&(h=1E3,f=e.content,g=!1))}if(g)d.html(k);else{var l=this.$(".module");l.replaceWith(f);this.$el.children("style").remove();l=this.$(".module");b.VisualCache[c.cid]&&l.addClass(b.VisualCache[c.cid]);
a||(b.liveStylingInstance.$liveStyledElmt=l,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.Utils.loadContentJs(l,"module")},h))}},previewReload:function(c,e,a,d){function k(a){var d=n.$el.find(".module").first();d.replaceWith(a);d=n.$el.find(".module").first();b.VisualCache[n.model.cid]&&d.addClass(b.VisualCache[n.model.cid]);b.liveStylingInstance.$liveStyledElmt=d;b.Utils.loadContentJs(d,"module");n.$el.find(".tb-preview-component").remove()}if(void 0!==e&&b.activeModel.cid&&
a&&(e=this.$el.find(e),0<e.length)){d.data("control-repeater")&&(e=e.eq(d.closest(".tb_repeatable_field").index()));e.html(a);return}var n=this;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();this.is_ajax_call=!0;n.el.insertAdjacentHTML("afterbegin",'<span class="tb-preview-component sp-preloader"></span>');e=this.model.get("mod_name");a=c.unsetKey;delete c.cid;delete c.unsetKey;c=b.Utils.clear(c);c["module_"+e+"_slug"]=e;c=JSON.stringify(c);var g=Themify.hash(c);a&&delete m[g];if(void 0!==
m[g]&&void 0!==m[g].data)c=m[g].cid,this.model.cid!==c&&(m[g].data=m[g].data.replace(new RegExp(e+"-"+c+"-"+c,"g"),e+"-"+this.model.cid+"-"+this.model.cid),m[g].cid=this.model.cid),k(m[g].data);else return m[g]={},this._jqueryXhr=f.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_load_module_partial",tb_post_id:this.$el.closest(".themify_builder_content").data("postid"),tb_cid:this.model.cid,tb_module_slug:e,tb_module_data:c,tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){m[g].data=
a;m[g].cid=n.model.cid;k(a)},error:function(){n.$el.removeClass("tb-preview-loading")}}),this}});b.bootstrap=function(c,e){var a=[],d=c?!0:!1,k=[];c||(c=b.Models.Registry.items);for(var n in c){var g=b.Models.Registry.items[n];var h=g.toJSON();g=h.elType;var f=h["module"===g?"mod_settings":"styling"];if(f&&0<Object.keys(f).length)!0===d&&k.push({type:"module"===g?h.mod_name:g,cid:n,data:f});else if("module"!==g)continue;"module"===g&&"tile"!==h.mod_name&&"ajax"!==themifyBuilder.modules[h.mod_name].type?
(g=b.Models.Registry.lookup(n),g.trigger("custom:preview:live",h.mod_settings,"accordion"===h.mod_name||"box"===h.mod_name||"feature"===h.mod_name||"tab"===h.mod_name||"text"===h.mod_name||"plain-text"===h.mod_name||"pointers"===h.mod_name||"pro-image"===h.mod_name||"countdown"===h.mod_name||"button"===h.mod_name||"pro-slider"===h.mod_name||"timeline"===h.mod_name,n)):("column"===g?delete h.modules:"row"!==g&&"module"!==g&&"subrow"!==g||delete h.cols,a.push({jobID:n,data:h}))}!0===d&&b.liveStylingInstance.setNewRules(k);
this.batch_rendering(a,0,360,e)};b.batch_rendering=function(c,e,a,d){if(e>=c.length)f.isFunction(d)&&d.call(this);else{var k=c.slice(e,e+a);this.render_element(k).done(function(){b.batch_rendering(c,e+=a,a,d)})}};b.render_element=function(c){return f.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element",batch:JSON.stringify(c),tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(c){for(var a in c)b.Models.Registry.lookup(a).trigger("create:element",
c[a])}})};b.get_visual_templates=function(b){function c(a){var d="",c;for(c in a)d+=a[c];document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeend",d);b&&b()}var a=function(){if(themifyBuilder.debug)return!1;try{var a=localStorage.getItem("tb_visual_templates"),b="";if(!a)return!1;var a=JSON.parse(a),c;for(c in themifyBuilder.modules)b+=c;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==Themify.hash(b)?!1:a.val}catch(g){}return!1}();a?c(a):f.ajax({type:"POST",url:themifyBuilder.ajaxurl,
dataType:"json",data:{action:"tb_load_visual_templates",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){if(a){c(a);try{var d="",b;for(b in themifyBuilder.modules)d+=b;var g={val:a,ver:tbLocalScript.version,h:Themify.hash(d)};localStorage.setItem("tb_visual_templates",JSON.stringify(g))}catch(h){}}}})};b.render=function(){b.get_visual_templates(function(){for(var c=[document.getElementById("themify_builder_content-"+themifyBuilder.post_ID)],e=0;1>e;++e){var a=c[e].dataset.postid,d=
c[e].getElementsByTagName("script")[0],k=window["builderdata_"+a]?window["builderdata_"+a].data:[];0===k.length&&(k={});window["builderdata_"+a]=null;d&&d.parentNode.removeChild(d);b.id=a;b.Instances.Builder[e]=new b.Views.Builder({el:"#themify_builder_content-"+a,collection:new b.Collections.Rows(k),type:"visual"});b.Instances.Builder[e].render();b.bootstrap(null,function(){b.toolbar.el.style.display="block";window.parent.jQuery("body").trigger("themify_builder_ready");b.Utils.loadContentJs();top_iframe.body.insertAdjacentHTML("beforeend",
themifyBuilder.data);themifyBuilder.data=null;Themify.is_builder_loaded=!0;b.vent.trigger("dom:builder:init",!0);ThemifyBuilderCommon.inLightboxIframe()&&f(".tb_toolbar_backend_edit",top_iframe).hide()})}b.id=!1})};f("body").one("builderiframeloaded.themify",function(c,e){b.iframe=e;tbLocalScript.isAnimationActive&&setTimeout(function(){Themify.LoadCss(tbLocalScript.builder_url+"/css/animate.min.css")},1);b.toolbar=new b.Views.Toolbar({el:"#tb_toolbar"});b.toolbar.render();setTimeout(function(){b.liveStylingInstance=
new q;b.liveStylingInstance.getRules()},50);setTimeout(function(){b.render()},1);setTimeout(function(){b.Views.bindEvents()},1);b.Forms.bindEvents()});var q=function(c){function e(){this.$context=c("#themify_builder_lightbox_parent",top_iframe);this.group=this.type=this.prefix=this.isInit=!1;this.styleName="themify-builder-component-customize";this.style_tab="#themify_builder_options_styling";this.generatedPrefix=[];this.generatedCache=[];this.module_rules=[];this.rulesCache=[];this.tempData=[];this.prevData=
[];this.currentSheet=null;var a=this;setTimeout(function(){a.InitInlineStyles();a.initModChange();a.before_close();a.bindLightboxForm()},1)}e.prototype.InitInlineStyles=function(){var a='<style type="text/css" id="'+this.styleName+'-desktop"></style>',d;for(d in themifyBuilder.breakpoints)var k=b.Utils.getBPWidth(d)+"px",a=a+('<style media="screen and (max-width:'+k+')" type="text/css" id="'+this.styleName+"-"+d+'"></style>');document.body.insertAdjacentHTML("beforeend",a)};e.prototype.init=function(a){this.type=
b.activeModel.get("elType");this.$liveStyledElmt=c(".tb_element_cid_"+b.activeModel.cid);this.prefix=".themify_builder .tb_element_cid_"+b.activeModel.cid;"module"===this.type?(this.$liveStyledElmt=this.$liveStyledElmt.children(".module"),this.prefix+=" ",this.group=b.activeModel.get("mod_name")):("row"!==this.type&&"sub-column"!==b.activeModel.get("component_name")&&(this.prefix=".themify_builder_content"+this.prefix),this.group=this.type);this.currentStyleObj="object"===typeof a?a:{};this.tempData=
[];this.tempData[b.activeBreakPoint]=[];this.rulesCache[b.activeBreakPoint]||(this.rulesCache[b.activeBreakPoint]=[]);this.currentSheet=this.getSheet(b.activeBreakPoint);this.isInit=!0};e.prototype.getRules=function(){var a=function(){try{var a=localStorage.getItem("tb_rules"),d="";if(!a)return!1;var a=JSON.parse(a),b;for(b in themifyBuilder.modules)d+=b;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==Themify.hash(d)?!1:JSON.parse(a.val)}catch(h){}return!1}();if(a)this.module_rules=
a;else{var d=this;c.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_rules",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){if(a){d.module_rules=a;try{var b="",c;for(c in themifyBuilder.modules)b+=c;var k={val:JSON.stringify(a),ver:tbLocalScript.version,h:Themify.hash(b)};localStorage.setItem("tb_rules",JSON.stringify(k))}catch(t){}}}})}};e.prototype.setNewRules=function(a){var d=this;return c.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",
data:{data:JSON.stringify(a),action:"tb_set_newrules",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){if(a)for(var b in a)for(var k=d.getSheet(b),h=k.cssRules?k.cssRules:k.rules,e=0,f=a[b].length;e<f;++e)a[b][e]=c.trim(a[b][e]),a[b][e]&&k.insertRule(a[b][e],h.length)}})};e.prototype.setLiveStyle=function(a,d,c){c||(c=[""]);for(var k="",g=a,e=this.currentSheet.cssRules?this.currentSheet.cssRules:this.currentSheet.rules,f=0,l=c.length;f<l;++f)k+=this.prefix+c[f],f!==l-1&&(k+=",");-1!==
a.indexOf("-")&&(c=a.toLowerCase().split("-"),g=c[0]+c[1].charAt(0).toUpperCase()+c[1].slice(1),c[2]&&(g+=c[2].charAt(0).toUpperCase()+c[2].slice(1)));k=k.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">");c=Themify.hash(k);f=d;if(void 0!==this.rulesCache[b.activeBreakPoint][c])l=this.rulesCache[b.activeBreakPoint][c];else a:{for(var l=0,m=e.length;l<m;++l)if(k===e[l].selectorText)break a;l=!1}!1===d&&(d="");!1!==l&&e[l]?e[l].style[g]=d:(l=e.length,this.currentSheet.insertRule(k+"{"+a+":"+d+";}",l));
this.rulesCache[b.activeBreakPoint][c]=l;void 0===this.tempData[b.activeBreakPoint][l]&&(this.tempData[b.activeBreakPoint][l]=[]);this.tempData[b.activeBreakPoint][l][g]=d;""===f&&this.removeGenerated(k,g,l)};e.prototype.initModChange=function(){var a=this;c("body").on("themify_builder_change_mode",function(d,b,c){a.isInit&&(void 0===a.tempData[c]&&(a.tempData[c]=[]),void 0===a.rulesCache[c]&&(a.rulesCache[c]=[]),a.currentSheet=a.getSheet(c))})};e.prototype.revertRules=function(){var a=void 0!==this.prevData[b.activeModel.cid]?
this.prevData[b.activeModel.cid]:!1,d;for(d in this.tempData){var c=this.getSheet(d),c=c.cssRules?c.cssRules:c.rules,e;for(e in this.tempData[d])if(c[e])for(var g in this.tempData[d][e]){var h="";a&&void 0!==a[d]&&void 0!==a[d][e]&&void 0!==a[d][e][g]&&(h=a[d][e][g]);c[e].style[g]=h}}this.tempData=[]};e.prototype.removeGenerated=function(a,d,c){function k(a,d,b){for(var c=0,e=a.length;c<e;++c)if(d===a[c].type)if(!1!==b&&-1!==a[c].conditionText.indexOf(b)){var f=k(a[c].cssRules?a[c].cssRules:a[c].rules,
CSSRule.STYLE_RULE,!1);if(void 0!==f)return[c,f]}else if(!1===b&&m.generatedPrefix[g]===a[c].selectorText.replace(/\s{2,}/g," ").replace(/\s*\,\s*/g,",").replace(/\s*>\s*/g,">"))return c}var g=b.activeModel.cid;if(void 0!==b.VisualCache[g]){var e=this.$liveStyledElmt.closest(".themify_builder_content").data("postid");e=document.getElementById("themify-builder-"+e+"-generated-css");if(null!==e){if(e=e.sheet,e=e.cssRules?e.cssRules:e.rules,void 0===this.generatedPrefix[g]){var f="";if("column"===this.type&&
"sub-column"!==b.activeModel.get("component_name")){var l=this.$liveStyledElmt.closest(".module_row").data("cid");void 0!==b.VisualCache[l]&&(f=b.VisualCache[l].split(" ")[1])}else"subrow"===this.type?(l=this.$liveStyledElmt.closest(".module_column"),void 0!==b.VisualCache[l.data("cid")]&&(f=b.VisualCache[l.data("cid")].split(" ")[0],l=l.closest(".module_row").data("cid"),f=void 0!==b.VisualCache[l]?b.VisualCache[l].split(" ")[1]+" ."+f:"")):"module"===this.type&&(f="themify_builder");""!==f&&(f=
"."+f+" ");f=f+"."+b.VisualCache[g].replace(" ",".");this.generatedPrefix[g]=a.replace(new RegExp(this.prefix,"ig"),f).replace(/\s{2,}/g," ").replace(/\s*\,\s*/g,",").replace(/\s*>\s*/g,">")}}else{delete b.VisualCache[g];this.generatedPrefix[g];return}}var m=this;if(void 0!==this.generatedPrefix[g]){void 0===this.generatedCache[b.activeBreakPoint]&&(this.generatedCache[b.activeBreakPoint]=[]);f=CSSRule.STYLE_RULE;l=Themify.hash(this.generatedPrefix[g]);a=this.generatedCache[b.activeBreakPoint][l];
var p=!1;void 0===a&&("desktop"!==b.activeBreakPoint&&(p=b.Utils.getBPWidth(b.activeBreakPoint)+"px",f=CSSRule.MEDIA_RULE),this.generatedCache[b.activeBreakPoint][l]=k(e,f,p),a=this.generatedCache[b.activeBreakPoint][l]);void 0!==a&&(f="",void 0!==a[1]?(e=e[a[0]].cssRules?e[a[0]].cssRules:e[a[0]].rules,f=e[a[1]].style[d],e[a[1]].style[d]=""):"desktop"===b.activeBreakPoint&&(f=e[a].style[d],e[a].style[d]=""),""!==f&&(void 0===this.prevData[g]&&(this.prevData[g]=[]),void 0===this.prevData[g][b.activeBreakPoint]&&
(this.prevData[g][b.activeBreakPoint]=[]),void 0===this.prevData[g][b.activeBreakPoint][c]&&(this.prevData[g][b.activeBreakPoint][c]=[]),this.prevData[g][b.activeBreakPoint][c][d]=f))}};e.prototype.remember=function(a){this.prevData[a]=c.extend(!0,{},this.tempData)};e.prototype.getRememberedStyles=function(){return this.tempData};e.prototype.getSheet=function(a){return document.getElementById(this.styleName+"-"+a).sheet};e.prototype.reset=function(){var a=Object.keys(themifyBuilder.breakpoints);a.push("desktop");
for(var d in a)c("link#"+this.styleName+"-"+d).remove();this.InitInlineStyles();this.rulesCache=[];this.tempData=[];this.prevData=[];this.generatedPrefix=[];this.generatedCache=[]};e.prototype.doUndo=function(a,d){for(var c in a){var b=this.getSheet(c),b=b.cssRules?b.cssRules:b.rules,e;for(e in a[c])if(b[e])for(var f in a[c][e])b[e].style[f]=d?"":a[c][e][f]}};e.prototype.before_close=function(){var a=this;c("body").on("themify_builder_lightbox_before_close",function(){a.isInit=!1;if(null!==b.activeModel&&
(a.$liveStyledElmt.removeClass("animated"),!b.saving&&(a.revertRules(),a.type&&"module"!==a.type))){var d=b.activeModel.get("styling");d&&"slider"===d.background_type&&d.background_slider&&b.hasChanged&&a.bindBackgroundSlider()}})};e.prototype.bindColors=function(){var a=this;c("body").on("themify_builder_color_picker_change",function(d,c,b,e){a.isInit&&("cover_color"===c||"cover_color_hover"===c?a.addOrRemoveComponentOverlay(c,e):b.hasClass("border_color")?a.bindMultiFields(b):(d=a.getValue(c))&&
a.setLiveStyle(d.prop,e,d.selector))})};e.prototype.overlayType=function(a,d){var e="color"===d||"hover_color"===d;a=e?a.replace("-type",""):"cover_color_hover-type"===a?"cover_gradient_"+d.replace("_","-")+"-type":a.replace("color","gradient-gradient");var f=this.$context.find("#"+a);if(e){if(e=f.val())if(f.data("minicolors-initialized"))e=f.minicolors("rgbaString");else{var g=f.data("opacity");""!==g&&void 0!==g&&"1"!=g&&"0.99"!=g&&(e=b.Utils.toRGBA(e+"_"+g))}c("body").trigger("themify_builder_color_picker_change",
[a,f,e])}else f.trigger("change")};e.prototype.bindBackgroundGradient=function(a,c){if(this.isInit){var d=this.getValue(a);d&&("cover_gradient"!==a&&"cover_gradient_hover"!==a||this.setLiveStyle("background-color",!1,d.selector),this.setLiveStyle(d.prop,c,d.selector))}};e.prototype.addOrRemoveComponentOverlay=function(a,d){var b=this.getComponentBgOverlay(),e=0!==b.length;e||(b=c("<div/>",{"class":"builder_row_cover"}));if("cover_gradient"!==a&&"cover_gradient_hover"!==a){var g=this.getValue(a);this.setLiveStyle("background-image",
"none",g.selector);this.setLiveStyle(g.prop,d,g.selector)}else this.bindBackgroundGradient(a,d);e||(e=this.getComponentBgSlider(),0< !e.length&&(e=this.$liveStyledElmt.children("column"!==this.type?"."+this.type+"_inner":".themify_module_holder")),b.insertBefore(e))};e.prototype.bindMultiFields=function(a,d){function e(a,c){if(!q&&"row"===h.type&&""===tbLocalScript.fullwidth_support&&(u&&("padding"===c||"margin"===c)||"padding-left"===c||"padding-right"===c||"margin-left"===c||"margin-right"===c)){var d=
c.split("-"),e=b.activeBreakPoint+"-"+d[0];if(u)a=a+","+a;else{var f=h.$liveStyledElmt.data(e),f=f?f.split(","):[];"left"===d[1]?f[0]=a:f[1]=a;a=f.join(",")}h.$liveStyledElmt.attr("data-"+e,a).data(e,a);ThemifyBuilderModuleJs.setupFullwidthRows(h.$liveStyledElmt)}}function f(a){var d=c.trim(a.val());""!==d&&(d=parseFloat(d),isNaN(d)?d="":0!==d&&(d+=h.$context.find("#"+a.prop("id")+"_unit").val()));return d}function g(a){var d=a.closest("li");a=parseFloat(c.trim(d.find(".border_width").val()));var b=
d.find(".border_style").val(),d=d.find(".minicolors-input"),e=c.trim(d.val()),d=e&&d.data("minicolors-initialized")?d.minicolors("rgbaString"):e;"none"===b?a=b:isNaN(a)||""===a||""===d?a="":(-1===d.indexOf("rgb")&&-1===d.indexOf("#")&&(d="#"+d),a=a+"px "+b+" "+d);return a}var h=this;var m=a.prop("id");var l=h.getValue(m);if(l){m=a.closest(".tb_seperate_items");var p=l.prop.split("-")[0];var q=m.hasClass("tb_borders");var u="1"===m.attr("data-checked");if(u){var r=q?g(a):f(a);h.setLiveStyle(p,r,l.selector);
e(r,p)}else d?(h.setLiveStyle(p,"",l.selector),m.find(".tb_multi_field").each(function(){r=q?g(c(this)):f(c(this));var a=h.getValue(c(this).prop("id")).prop;h.setLiveStyle(a,r,l.selector);e(r,a)})):(r=q?g(a):f(a),h.setLiveStyle(l.prop,r,l.selector),e(r,l.prop))}};e.prototype.bindRowWidthHeight=function(){var a=this;this.$context.on("change",'input[name="row_height"]',function(){var d=c(this).val();"fullheight"===d?a.$liveStyledElmt.addClass(d):a.$liveStyledElmt.removeClass("fullheight");c(window).trigger("tfsmartresize.tfVideo")}).on("change",
'input[name="row_width"]',function(){var d=c(this).val(),b=ThemifyBuilderModuleJs;"fullwidth"===d?(a.$liveStyledElmt.removeClass("fullwidth").addClass("fullwidth_row_container"),b.setupFullwidthRows(a.$liveStyledElmt)):"fullwidth-content"===d?(a.$liveStyledElmt.removeClass("fullwidth_row_container").addClass("fullwidth"),b.setupFullwidthRows(a.$liveStyledElmt)):a.$liveStyledElmt.removeClass("fullwidth fullwidth_row_container").css({"margin-left":"","margin-right":"","padding-left":"","padding-right":"",
width:""});c(window).trigger("tfsmartresize.tfVideo")})};e.prototype.bindParralax=function(){var a=this;this.$context.on("keyup","#custom_parallax_scroll_zindex",function(){var d=parseInt(c(this).val());isNaN(d)&&(d="");a.$liveStyledElmt[0].style.zIndex=d})};e.prototype.bindAnimation=function(){var a=this;this.$context.on("change","#animation_effect,#animation_effect_delay,#animation_effect_repeat",function(){var d=a.getStylingVal("animation_effect");d&&a.$liveStyledElmt.removeClass(d+" wow animated").css({"animation-name":"",
"animation-delay":"","animation-iteration-count":""});var c=a.$context.find("#animation_effect").val();a.setStylingVal("animation_effect",c);if(c){var d=parseFloat(a.$context.find("#animation_effect_delay").val()),b=parseInt(a.$context.find("#animation_effect_repeat").val());a.$liveStyledElmt.css({"animation-delay":0<d&&!isNaN(d)?d+"s":"","animation-iteration-count":0<b&&!isNaN(b)?b:""});setTimeout(function(){a.$liveStyledElmt.addClass(c+" animated")},1)}})};e.prototype.bindAdditionalCSSClass=function(){var a=
this;this.$context.on("keyup","#custom_css_row, #custom_css_column",function(){var d=this.id,b=a.getStylingVal(d);a.$liveStyledElmt.removeClass(b);b=c(this).val();a.setStylingVal(d,b);a.$liveStyledElmt.addClass(b)})};e.prototype.bindRowAnchor=function(){var a=this;this.$context.on("keyup","#row_anchor",function(){var d=a.getStylingVal("row_anchor");a.$liveStyledElmt.removeClass(a.getRowAnchorClass(d));d=c.trim(c(this).val());a.setStylingVal("row_anchor",d);""!==d&&a.$liveStyledElmt.addClass(a.getRowAnchorClass(d))})};
e.prototype.getRowAnchorClass=function(a){return 0<a.length?"tb_section-"+a:""};e.prototype.getStylingVal=function(a){return void 0!==this.currentStyleObj[a]?this.currentStyleObj[a]:""};e.prototype.setStylingVal=function(a,d){this.currentStyleObj[a]=d};e.prototype.bindBackgroundMode=function(a){var d=this.getStylingVal("background_repeat");if(0<a.length){0<d.length&&this.$liveStyledElmt.removeClass(d);this.setStylingVal("background_repeat",a);this.$liveStyledElmt.addClass(a);var d={repeat:"repeat",
"repeat-x":"repeat-x","repeat-y":"repeat-y","repeat-none":"no-repeat",fullcover:"cover","best-fit-image":"contain","builder-parallax-scrolling":"cover","builder-zoom-scrolling":"100%","builder-zooming":"100%"},c={};d[a]&&(-1!==a.indexOf("repeat")?c["background-repeat"]=d[a]:(c["background-size"]=d[a],c["background-repeat"]="no-repeat;","best-fit-image"===d[a]||"builder-zooming"===d[a]?c["background-position"]="center center;":"builder-zoom-scrolling"===d[a]&&(c["background-position"]="50%;")),this.$liveStyledElmt.css(c))}else this.$liveStyledElmt.removeClass(d)};
e.prototype.bindBackgroundPosition=function(a){this.getStylingVal("background_position");if(a&&0<a.length){this.setStylingVal("background_position",a);var d=this.getValue("background_position");d&&this.setLiveStyle(d.prop,a.replace("-"," "),d.selector)}};e.prototype.bindBackgroundSlider=function(){function a(a){a=c(a);var b=d.getComponentBgOverlay();0<b.length?b.after(a):"row"===d.type?d.$liveStyledElmt.children(".themify_builder_row_top").after(a):d.$liveStyledElmt.prepend(a);ThemifyBuilderModuleJs.backgroundSlider(c(a[0]))}
var d=this,e=c.trim(d.$context.find("#background_slider").val());d.removeBgSlider();if(e){void 0===d.cahce&&(d.cahce={});var e={shortcode:encodeURIComponent(e),mode:d.$context.find("#background_slider_mode").val(),size:d.$context.find("#background_slider_size").val()},f="",g;for(g in e)f+=Themify.hash(g+e[g]);void 0!==this.cahce[f]?a(this.cahce[f]):(e.type=d.type,e.order=b.activeModel.cid,c.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:"tb_slider_live_styling",tb_background_slider_data:e},
function(c){10>c.length||(d.cahce[f]=c,a(c))}))}};e.prototype.VideoOptions=function(){var a=this;this.$context.on("change",'input[name="background_video_options"]',function(){var d=a.$liveStyledElmt.find(".big-video-wrap").first(),b=c(this).val(),e=c(this).is(":checked"),f="";d.hasClass("themify_ytb_wrapper")?(d=a.$liveStyledElmt,f="ytb"):d.hasClass("themify-video-vmieo")?(d=$f(d.children("iframe")[0]))&&(f="vimeo"):(d=a.$liveStyledElmt.data("plugin_ThemifyBgVideo"),f="local");"mute"===b?e?("ytb"===
f?d.ThemifyYTBMute():"vimeo"===f?d.api("setVolume",0):"local"===f&&d.muted(!0),a.$liveStyledElmt.data("mutevideo","mute")):("ytb"===f?d.ThemifyYTBUnmute():"vimeo"===f?d.api("setVolume",1):"local"===f&&d.muted(!1),a.$liveStyledElmt.data("mutevideo","")):"unloop"===b&&(e?("vimeo"===f?d.api("setLoop",0):"local"===f&&d.loop(!1),a.$liveStyledElmt.data("unloopvideo","")):("vimeo"===f?d.api("setLoop",1):"local"===f&&d.loop(!0),a.$liveStyledElmt.data("unloopvideo","loop")))})};e.prototype.bindBackgroundTypeRadio=
function(a){"image"===a||"gradient"===a?(this.removeBgSlider(),this.removeBgVideo(),"image"===a?this.setLiveStyle("background-image","none"):a="module"===this.type?"image-gradient-angle":a+"-gradient-angle"):"video"===a?this.removeBgSlider():this.removeBgVideo();this.$context.find("#background_"+a).trigger("change")};e.prototype.setData=function(a,d,c){if(a=this.getValue(a))""===d&&(d=a.prop),this.setLiveStyle(d,c,a.selector)};e.prototype.bindChangesEvent=function(){var a=this;a.$context.on("change",
a.style_tab+" select,"+a.style_tab+" textarea,"+a.style_tab+" input.themify-builder-uploader-input,"+a.style_tab+' input[type="radio"]',function(d){if(a.isInit&&!c(this).hasClass("minicolors-input")&&!c(this).hasClass("color_opacity")&&!c(this).hasClass("themify-gradient-type")){var b=c.trim(c(this).val()),e=c(this).is(":radio"),f=!e&&c(this).is("select"),h=!f&&e?c(this).parent(".tb_lb_option").prop("id"):c(this).prop("id");if(f)if(c(this).hasClass("font-family-select"))"default"!==b&&void 0===ThemifyBuilderCommon.safe_fonts[b]?
ThemifyBuilderCommon.loadGoogleFonts([b.split(" ").join("+")+":400,700:latin,latin-ext"]):"default"===b&&(b="");else if(c(this).hasClass("tb_unit"))a.$context.find("#"+h.replace("_unit","")).trigger("keyup");else{if(c(this).hasClass("border_style")){a.bindMultiFields(c(this),d.isTrigger);return}if("background_repeat"===h){a.bindBackgroundMode(b);return}if("background_position"===h){a.bindBackgroundPosition(b);return}if("module"!==a.type&&("background_slider_size"===h||"background_slider_mode"===h)){a.bindBackgroundSlider();
return}}else if(e){c(this).is(":checked")||(b="");if("background_type"===h||"background_image-type"===h){a.bindBackgroundTypeRadio(b);return}if("cover_color-type"===h||"cover_color_hover-type"===h){a.overlayType(h,b);return}}else if(c(this).hasClass("themify-builder-uploader-input")){if("background_video"===h)return 0<b.length?(a.$liveStyledElmt.data("fullwidthvideo",b),_.isEmpty(a.$liveStyledElmt.data("mutevideo"))&&a.$context.find("#background_video_options_mute").is(":checked")&&a.$liveStyledElmt.data("mutevideo",
"mute"),ThemifyBuilderModuleJs.fullwidthVideo(a.$liveStyledElmt)):a.removeBgVideo(),!1;b=b?"url("+b+")":"none"}else if("module"!==a.type&&"background_slider"===h){a.bindBackgroundSlider();return}a.setData(h,"",b)}}).on("keyup",a.style_tab+' input[type="text"]',function(b){if(!c(this).hasClass("minicolors-input")&&!c(this).hasClass("color_opacity")){var d=c.trim(c(this).val()),e=c(this).prop("id");c(this).hasClass("border_width")||c(this).hasClass("tb_multi_field")?a.bindMultiFields(c(this),b.isTrigger):
(c(this).is(".column_gap, .column_rule_width")?d+="px":d&&(b=a.$context.find(a.style_tab+" #"+e+"_unit"),0<b.length&&(d+=b.val()?b.val():"px")),a.setData(e,"",d))}})};e.prototype.getValue=function(a){return this.isInit?void 0!==this.module_rules[this.group]&&void 0!==this.module_rules[this.group][a]?this.module_rules[this.group][a]:!1:!1};e.prototype.bindLightboxForm=function(){this.bindChangesEvent();this.bindColors();this.bindAnimation();this.VideoOptions();this.bindRowAnchor();this.bindRowWidthHeight();
this.bindParralax();this.bindAdditionalCSSClass()};e.prototype.getComponentBgOverlay=function(){return this.$liveStyledElmt.children(".builder_row_cover")};e.prototype.getComponentBgSlider=function(){var a="colum"===this.type&&"sub-column"===b.activeModel.get("component_name")?"sub-col":"colum"===this.type?"col":this.type;return this.$liveStyledElmt.children("."+a+"-slider")};e.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children(".tb_backstretch")).remove();
this.$liveStyledElmt.css({position:"",background:"","z-index":""})};e.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr("data-fullwidthvideo").data("fullwidthvideo","").children(".big-video-wrap").remove()};return e}(jQuery)})(jQuery);
